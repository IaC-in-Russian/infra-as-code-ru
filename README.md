# üß© Infra as Code –ø–æ-—Ä—É—Å—Å–∫–∏ ‚Äî —Å–µ—Ä–∏—è –ø—Ä–æ Ansible

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏ –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –∫–∞–Ω–∞–ª–∞ **¬´Infra as Code –ø–æ-—Ä—É—Å—Å–∫–∏¬ª** –≤ –î–∑–µ–Ω–µ.  
–ö–∞–Ω–∞–ª: https://dzen.ru/id/6903c806e3f4ad741bd870f0

> **–ó–∞—á–µ–º —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π?** –ó–¥–µ—Å—å –ª–µ–∂–∞—Ç –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ —Å—Ç–∞—Ç–µ–π: –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏, –ø–ª–µ–π–±—É–∫–∏, —Ä–æ–ª–∏, —à–∞–±–ª–æ–Ω—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.  
> –°—Ç–∞—Ç—å–∏ –∏–¥—É—Ç –ø–æ —à–∞–≥–∞–º ‚Äî –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —ç—Ç–æ –æ—Ç—Ä–∞–∂–µ–Ω–æ –ø–æ –ø–∞–ø–∫–∞–º/–≤–µ—Ç–∫–∞–º `v01`, `v02`, ‚Ä¶

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏](#—á—Ç–æ-–≤–Ω—É—Ç—Ä–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- [–î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞](#–¥–æ—Ä–æ–∂–Ω–∞—è-–∫–∞—Ä—Ç–∞)
- [–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã](#–ø–æ–ª–µ–∑–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏
- ‚úÖ –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏, –ø–ª–µ–π–±—É–∫–∏, —Ä–æ–ª–∏, —à–∞–±–ª–æ–Ω—ã –∏ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–¥–∞—á  
- ‚úÖ –ü–∞–ø–∫–∏/–≤–µ—Ç–∫–∏ –ø–æ —Å—Ç–∞—Ç—å—è–º (`v01`, `v02`, ‚Ä¶) —Å –ø–æ—à–∞–≥–æ–≤—ã–º–∏ diff  
- ‚úÖ –ú–∏–Ω–∏-—à–ø–∞—Ä–≥–∞–ª–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
git clone https://github.com/IaC-in-Russian/infra-as-code-ru.git
cd iac-ansible-ru

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
ansible --version

# –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –±–µ–∑ SSH
ansible all -i 'localhost,' -c local -m ping
```

> **–ü–æ–¥—Å–∫–∞–∑–∫–∞.** –ü–æ –º–µ—Ä–µ –≤—ã—Ö–æ–¥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∑–∞—Ö–æ–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É `v01/`, `v02/` –∏ —Ç. –¥. ‚Äî —Ç–∞–º –ª–µ–∂–∞—Ç –∫–æ–Ω–µ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç–∞—Ç—å–µ.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
ansible.cfg
inventory/
  hosts.ini
playbooks/
  site.yml
roles/
  common/
    tasks/main.yml
    handlers/main.yml
    templates/motd.j2
group_vars/
host_vars/
docs/
  v01/  v02/  ...
```

---

## –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞
- 01 ‚Äî —á—Ç–æ —Ç–∞–∫–æ–µ Ansible, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–µ—Ä–≤—ã–π `ping`
- 02 ‚Äî `ansible.cfg` (–±–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- 03 ‚Äî `hosts.ini` (–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å)
- 04 ‚Äî —Ä–æ–ª–∏, handlers, templates –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ
- 05 ‚Äî best practices: –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

> –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –≤—ã—Ö–æ–¥—è—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ; —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç–∞—Ç—å—è–º–∏.

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø—ã —Ö–æ—Å—Ç–æ–≤ –∏–∑ inventory
ansible kafka -m ping

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É —Å –ø–æ–≤—ã—à–µ–Ω–∏–µ–º –ø—Ä–∞–≤
ansible all -m apt -a "name=htop state=present update_cache=true" --become

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–ª–µ–π–±—É–∫
ansible-playbook playbooks/site.yml
```

---

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞–∫ —à–∞–±–ª–æ–Ω –¥–ª—è —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.
